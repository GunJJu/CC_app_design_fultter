<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>회원가입</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --accent-color: #00ffff;
            --text-color: #111827;
            --border-color: #E5E7EB;
            --bg-color: #F9FAFB;
            --error-color: #e14040;
            --success-color: #22c55e;
            --disabled-color: #D1D5DB;
        }

        html,
        body {
            height: 100%;
            width: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
        }

        #app-container {
            background-color: white;
            width: 393px;
            height: 852px;
            border-radius: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            transition: all 0.2s ease-in-out;
            font-size: 1rem;
        }

        .form-input:focus {
            outline: none;
            border: 2px solid var(--accent-color);
            padding: calc(12px - 1px) calc(16px - 1px);
        }

        .action-button {
            width: 100%;
            padding: 14px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 1.125rem;
            color: var(--text-color);
            background-color: var(--accent-color);
            transition: all 0.3s ease;
        }

        .secondary-button {
            width: 100%;
            padding: 14px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 1.125rem;
            color: var(--text-color);
            background-color: #E5E7EB;
            transition: all 0.3s ease;
        }
    </style>
</head>

<body>
    <div id="app-container">
        <!-- Header -->
        <header class="w-full py-4 px-4 flex items-center flex-shrink-0">
            <button id="back-button" class="text-gray-600 text-2xl focus:outline-none w-10 h-10"><i
                    class="fas fa-arrow-left"></i></button>
            <h1 class="text-xl font-bold text-center flex-grow text-gray-800">회원가입</h1>
            <div class="w-10"></div>
        </header>

        <!-- Main Content -->
        <main id="main-content" class="w-full flex-grow p-8 pt-4 flex flex-col">

            <!-- Default Signup Form -->
            <div id="signup-form">
                <div class="mb-4">
                    <label for="email-input" class="block text-gray-700 text-sm font-bold mb-2">이메일</label>
                    <input type="email" id="email-input" class="form-input" placeholder="이메일 주소 입력">
                </div>
                <p class="text-xs text-gray-500 mb-6">계정이 이미 있는 경우, 로그인 페이지로 이동합니다.</p>
                <button id="next-button" class="action-button">다음</button>
            </div>

            <!-- Already Registered View (Initially Hidden) -->
            <div id="already-registered-view" class="hidden w-full text-center">
                <div class="my-12">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-exclamation-triangle text-3xl text-[var(--error-color)]"></i>
                    </div>
                    <h2 class="text-xl font-bold text-gray-800">이미 가입된 이메일입니다.</h2>
                </div>

                <div class="space-y-3">
                    <button id="login-button" class="action-button">로그인하기</button>
                    <button id="find-password-button" class="secondary-button">비밀번호 찾기</button>
                </div>
            </div>

        </main>
    </div>

    <script>
        // --- DATABASE ---
        const existingUsers = [
            { email: "wjk1226@kbu.ac.kr" },
            { email: "testuser@example.com" }
        ];

        // --- DOM ELEMENTS ---
        const emailInput = document.getElementById('email-input');
        const nextButton = document.getElementById('next-button');
        const signupForm = document.getElementById('signup-form');
        const alreadyRegisteredView = document.getElementById('already-registered-view');
        const loginButton = document.getElementById('login-button');
        const findPasswordButton = document.getElementById('find-password-button');

        // --- FUNCTIONS ---
        function isEmailRegistered(email) {
            return existingUsers.some(user => user.email.toLowerCase() === email.toLowerCase());
        }

        // --- EVENT LISTENERS ---
        nextButton.addEventListener('click', () => {
            const email = emailInput.value.trim();
            if (!email) {
                alert("이메일을 입력해주세요.");
                return;
            }

            if (isEmailRegistered(email)) {
                // 이메일이 이미 존재하면, 가입된 화면을 보여줌
                signupForm.classList.add('hidden');
                alreadyRegisteredView.classList.remove('hidden');
            } else {
                // 존재하지 않으면, 다음 가입 절차로 진행 (시뮬레이션)
                alert(`'${email}'(으)로 가입을 계속 진행합니다.`);
                // 예: window.location.href = '/signup/step2';
            }
        });

        loginButton.addEventListener('click', () => {
            alert("로그인 페이지로 이동합니다.");
            // 예: window.location.href = '/login';
        });

        findPasswordButton.addEventListener('click', () => {
            alert("비밀번호 찾기 페이지로 이동합니다.");
            // 예: window.location.href = '/find-password';
        });

    </script>
</body>

</html>